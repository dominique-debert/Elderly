generator client {
  provider = "prisma-client-js"
  output   = "../prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model activity {
  id                    String                 @id @default(cuid())
  creatorId             String                 @map("creator_id")
  title                 String                 @db.VarChar(255)
  description           String?
  startDate             DateTime               @map("start_date") @db.Timestamp(6)
  endDate               DateTime?              @map("end_date") @db.Timestamp(6)
  location              String?                @db.VarChar(255)
  gpsCoordinates        String?                @map("gps_coordinates")
  maxSpots              Int?                   @map("max_spots")
  categoryId            String                 @map("category_id")
  recurring             Boolean?               @default(false)
  frequency             String?                @db.VarChar(100)
  reducedMobilityAccess Boolean                @default(false) @map("reduced_mobility_access")
  difficultyLevel       Int?                   @map("difficulty_level")
  cost                  Float?
  status                String?                @db.VarChar(50)
  weatherRequirements   String?                @map("weather_requirements") @db.VarChar(255)
  transportOptions      String?                @map("transport_options") @db.VarChar(255)
  createdAt             DateTime               @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt             DateTime?              @map("updated_at") @db.Timestamp(6)
  user                  user                   @relation(fields: [creatorId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  activity_category     activity_category      @relation(fields: [categoryId], references: [id])
  activity_registration activityRegistration[]
}

model activityLog {
  id          String    @id @default(cuid())
  userId      String?   @map("userId")
  action_type String?   @db.VarChar
  description String?
  actionDate  DateTime? @map("action_date") @db.Timestamp(6)
  ipAddress   String?   @map("ip_address") @db.VarChar
  device      String?   @db.VarChar
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(6)
  user        user?     @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("activity_log")
}

model activityRegistration {
  activityId          String    @map("activity_id")
  userId              String    @map("user_id")
  registrationDate    DateTime  @map("registration_date") @db.Timestamp(6)
  status              String?   @db.VarChar(50)
  attendanceConfirmed Boolean?  @default(false) @map("attendance_confirmed")
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt           DateTime? @map("updated_at") @db.Timestamp(6)
  activity            activity  @relation(fields: [activityId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user                user      @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([activityId, userId])
  @@map("activity_registration")
}

model badge {
  id            String        @id @default(cuid())
  name          String        @db.VarChar(255)
  categoryId    String        @map("category_id")
  description   String?       @db.VarChar(255)
  icon          String?       @db.VarChar(255)
  level         Int?
  createdAt     DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime?     @map("updated_at") @db.Timestamp(6)
  badgeCategory badgeCategory @relation(fields: [categoryId], references: [id])
  userBadge     userBadge[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model cognitiveExercise {
  id                String            @id @default(cuid())
  name              String            @db.VarChar(255)
  categoryId        String            @map("category_id") // Mémoire, concentration, raisonnement, logique, langage, calcul mental, observation, culture générale
  difficultyLevel   Int?              @map("difficulty_level")
  durationMinutes   Int?              @map("duration_minutes")
  description       String?
  image             String?           @db.VarChar(255)
  createdAt         DateTime          @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime?         @map("updated_at") @db.Timestamp(6)
  cognitiveCategory cognitiveCategory @relation(fields: [categoryId], references: [id])
  userActivity      userActivity[]
  programCategory   programCategory?  @relation(fields: [programCategoryId], references: [id])
  programCategoryId String?

  @@map("cognitive_exercise")
}

model collaborativeProject {
  id              String           @id @default(cuid())
  title           String           @db.VarChar(255)
  description     String?
  creatorId       String           @map("creator_id")
  creationDate    DateTime         @default(now()) @map("creation_date") @db.Timestamp(6)
  status          String?          @db.VarChar(50)
  categoryId      String           @map("category_id") @db.VarChar(100)
  createdAt       DateTime         @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt       DateTime?        @map("updated_at") @db.Timestamp(6)
  user            user?            @relation(fields: [creatorId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  projectCategory projectCategory? @relation(fields: [categoryId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  projectMember   projectMember[]
  projectTask     projectTask[]

  @@map("collaborative_project")
}

model conversation {
  id                      String                    @id @default(cuid())
  type                    String?                   @db.VarChar(255)
  creationDate            DateTime?                 @map("creation_date") @db.Timestamp(6)
  title                   String?                   @db.VarChar(255)
  createdAt               DateTime                  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt               DateTime?                 @map("updated_at") @db.Timestamp(6)
  conversationParticipant conversationParticipant[]
  message                 message[]
  videoCall               videoCall[]
}

model conversationParticipant {
  conversationId String       @map("conversation_id")
  userId         String       @map("user_id")
  dateAdded      DateTime?    @map("date_added") @db.Timestamptz(6)
  administrator  Boolean?
  lastAccess     DateTime     @default(now()) @map("last_access") @db.Timestamp(6)
  createdAt      DateTime     @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt      DateTime?    @map("updated_at") @db.Timestamp(6)
  conversation   conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user           user         @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([conversationId, userId])
  @@map("conversation_participant")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model exerciseProgram {
  id                        String            @id @default(cuid())
  name                      String            @db.VarChar(255)
  categoryId                String            @map("category_id")
  difficultyLevel           Int?              @map("difficulty_level")
  adaptedForReducedMobility Boolean           @map("adapted_for_reduced_mobility")
  durationMinutes           Int?              @map("duration_minutes")
  description               String?
  videoLink                 String?           @map("video_link") @db.VarChar(255)
  image                     String?           @db.VarChar(255)
  createdAt                 DateTime          @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt                 DateTime?         @map("updated_at") @db.Timestamp(6)
  programCategory           programCategory[]
  userActivity              userActivity[]

  @@map("exercise_program")
}

model forumCategory {
  id               String       @id @default(cuid())
  name             String       @db.VarChar(255)
  description      String?      @db.VarChar(255)
  parentCategoryId String       @map("parent_category_id")
  createdAt        DateTime     @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?    @map("updated_at") @db.Timestamp(6)
  forumTopic       forumTopic[]

  @@map("forum_category")
}

model forumMessage {
  id               String      @id @default(cuid())
  topicId          String?     @map("topic_id")
  authorId         String?     @map("author_id")
  content          String?
  creationDate     DateTime?   @map("creation_date") @db.Timestamp(6)
  modificationDate DateTime?   @map("modification_date") @db.Timestamp(6)
  solutionMessage  Boolean?    @map("solution_message")
  createdAt        DateTime    @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?   @map("updated_at") @db.Timestamp(6)
  user             user?       @relation(fields: [authorId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_author_id")
  forumTopic       forumTopic? @relation(fields: [topicId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_topic_id")

  @@map("forum_message")
}

model forumTopic {
  id            String         @id @default(cuid())
  categoryId    String         @map("category_id")
  authorId      String         @map("author_id")
  title         String         @db.VarChar(255)
  creationDate  DateTime?      @default(now()) @map("creation_date") @db.Timestamp(6)
  pinned        Boolean?       @default(false)
  status        String?        @db.VarChar(50)
  views         Int?           @default(0)
  createdAt     DateTime       @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime?      @map("updated_at") @db.Timestamp(6)
  forumMessage  forumMessage[]
  user          user           @relation(fields: [authorId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_author")
  forumCategory forumCategory  @relation(fields: [categoryId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_category")

  @@map("forum_topic")
}

model goalProgress {
  id            String       @id @default(cuid())
  goalId        String       @map("goal_id")
  recordingDate DateTime     @map("recording_date") @db.Date
  achievedValue Int          @map("achieved_value")
  goalAchieved  Boolean      @map("goal_achieved")
  createdAt     DateTime     @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime?    @map("updated_at") @db.Timestamp(6)
  wellnessGoal  wellnessGoal @relation(fields: [goalId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_goal")

  @@map("goal_progress")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model healthIndicator {
  id                   String    @id @default(cuid())
  userId               String?   @map("user_id")
  recordingDate        DateTime  @map("recording_date") @db.Date
  stepCount            Int?      @map("step_count")
  sleepDurationMinutes Int?      @map("sleep_duration_minutes")
  sleepQuality         Int?      @map("sleep_quality")
  weight               Float?
  mood                 String?   @db.VarChar(10)
  notes                String?
  createdAt            DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt            DateTime? @map("updated_at") @db.Timestamp(6)
  user                 user?     @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("health_indicator")
}

model helpOffer {
  id          String      @id @default(cuid())
  requestId   String      @map("request_id")
  helperId    String      @map("helper_id")
  offerDate   DateTime    @map("offer_date") @db.Timestamp(6)
  message     String?
  status      String?     @db.VarChar(50)
  createdAt   DateTime    @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime?   @map("updated_at") @db.Timestamp(6)
  user        user        @relation(fields: [helperId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_helper")
  helpRequest helpRequest @relation(fields: [requestId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_request")

  @@map("help_offer")
}

model helpRequest {
  id                String             @id @default(cuid())
  creatorId         String             @map("creator_id")
  title             String             @db.VarChar(255)
  description       String?
  creationDate      DateTime           @default(now()) @map("creation_date") @db.Timestamp(6)
  neededDate        DateTime?          @map("needed_date") @db.Timestamp(6)
  estimatedDuration Int?               @map("estimated_duration")
  location          String?            @db.VarChar(255)
  gpsCoordinates    String?            @map("gps_coordinates")
  categoryId        String             @map("category_id")
  recurring         Boolean?           @default(false)
  frequency         String?            @db.VarChar(50)
  status            String?            @db.VarChar(50)
  points_offered    Int?               @default(0)
  createdAt         DateTime           @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime?          @map("updated_at") @db.Timestamp(6)
  helpOffer         helpOffer[]
  user              user               @relation(fields: [creatorId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_creator")
  serviceCompleted  serviceCompleted[]
  helpCategory      helpCategory?      @relation(fields: [categoryId], references: [id])

  @@map("help_request")
}

model localService {
  id              String           @id @default(cuid())
  name            String?          @db.VarChar(255)
  categoryId      String?          @map("category_id") @db.VarChar(255)
  address         String?          @db.VarChar(255)
  gpsCoordinates  String?          @map("gps_coordinates")
  phone           String?          @db.VarChar(20)
  website         String?          @db.VarChar(255)
  description     String?
  hours           String?          @db.VarChar(100)
  seniorFriendly  Boolean?         @map("senior_friendly")
  createdAt       DateTime         @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt       DateTime?        @map("updated_at") @db.Timestamp(6)
  serviceCategory serviceCategory? @relation(fields: [categoryId], references: [id])
  serviceRating   serviceRating[]

  @@map("local_service")
}

model medicationReminder {
  id                  String    @id @default(cuid())
  userId              String    @map("user_id")
  medication_name     String    @db.VarChar(255)
  dosage              String?   @db.VarChar(100)
  morningReminderTime DateTime? @map("morning_reminder_time") @db.Time(6)
  noonReminderTime    DateTime? @map("noon_reminder_time") @db.Time(6)
  eveningReminderTime DateTime? @map("evening_reminder_time") @db.Time(6)
  nightReminderTime   DateTime? @map("night_reminder_time") @db.Time(6)
  daysOfWeek          String?   @map("days_of_week") @db.VarChar(50)
  instructions        String?
  active              Boolean?  @default(true)
  startDate           DateTime? @map("start_date") @db.Timestamp(6)
  end_date            DateTime? @db.Timestamp(6)
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt           DateTime? @map("updated_at") @db.Timestamp(6)
  user                user      @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user")

  @@map("medication_reminder")
}

model message {
  id             String        @id @default(cuid())
  conversationId String        @map("conversation_id")
  senderId       String        @map("sender_id")
  content        String
  sendDate       DateTime      @map("send_date") @db.Timestamp(6)
  type           String?       @db.VarChar(50)
  read           Boolean?
  createdAt      DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt      DateTime?     @map("updated_at") @db.Timestamp(6)
  conversation   conversation? @relation(fields: [conversationId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user           user?         @relation(fields: [senderId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model municipalEvent {
  id              String    @id @default(cuid())
  title           String    @db.VarChar(255)
  description     String?
  startDate       DateTime  @map("start_date") @db.Timestamp(6)
  end_date        DateTime  @db.Timestamp(6)
  location        String    @db.VarChar(255)
  gps_coordinates String?
  organizer       String?   @db.VarChar(255)
  contact         String?   @db.VarChar(255)
  officialLink    String?   @map("official_link") @db.VarChar(255)
  createdAt       DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt       DateTime? @map("updated_at") @db.Timestamp(6)

  @@map("municipal_event")
}

model notification {
  id         String    @id @default(cuid())
  userId     String    @map("user_id")
  type       String    @db.VarChar(50)
  content    String
  read       Boolean?
  actionLink String?   @map("action_link") @db.VarChar(255)
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt  DateTime? @map("updated_at") @db.Timestamp(6)
  user       user?     @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model notificationPreferences {
  userId               String    @id @map("user_id")
  messageNotification  Boolean?  @default(false) @map("message_notification")
  activityNotification Boolean?  @default(false) @map("activity_notification")
  helpNotification     Boolean?  @default(false) @map("help_notification")
  forumNotification    Boolean?  @default(false) @map("forum_notification")
  emailNotification    Boolean?  @default(false) @map("email_notification")
  smsNotification      Boolean?  @default(false) @map("sms_notification")
  pushNotification     Boolean?  @default(false) @map("push_notification")
  quietHoursStart      DateTime? @map("quiet_hours_start") @db.Time(6)
  quietHoursEnd        DateTime? @map("quiet_hours_end") @db.Time(6)
  createdAt            DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt            DateTime? @map("updated_at") @db.Timestamp(6)
  user                 user      @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("notification_preferences")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model nutritionalAdvice {
  id                  String              @id @default(cuid())
  title               String              @db.VarChar(255)
  description         String?
  categoryId          String              @map("category_id")
  season              String              @db.VarChar(50)
  image               String?             @db.VarChar(255)
  createdAt           DateTime            @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt           DateTime?           @map("updated_at") @db.Timestamp(6)
  nutritionalCategory nutritionalCategory @relation(fields: [categoryId], references: [id])

  @@map("nutritional_advice")
}

model offlineUser {
  userId     String    @id @map("user_id")
  cachedData Json?     @map("cached_data") @db.Json
  lastSync   DateTime? @map("last_sync") @db.Timestamp(6)
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt  DateTime? @map("updated_at") @db.Timestamp(6)

  @@map("offline_user")
}

model projectMember {
  projectId            String               @map("project_id")
  userId               String               @map("user_id")
  role                 String               @db.VarChar(100)
  join_date            DateTime             @db.Timestamp(6)
  createdAt            DateTime             @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt            DateTime?            @map("updated_at") @db.Timestamp(6)
  collaborativeProject collaborativeProject @relation(fields: [projectId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user                 user                 @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([projectId, userId])
  @@map("project_member")
}

model projectTask {
  id                   String                @id @default(cuid())
  projectId            String                @map("project_id")
  title                String                @db.VarChar(255)
  description          String?
  creationDate         DateTime              @map("creation_date") @db.Timestamp(6)
  dueDate              DateTime?             @map("due_date") @db.Timestamp(6)
  status               String?               @db.VarChar(50)
  assigneeId           String?               @map("assignee_id")
  createdAt            DateTime              @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt            DateTime?             @map("updated_at") @db.Timestamp(6)
  user                 user?                 @relation(fields: [assigneeId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  collaborativeProject collaborativeProject? @relation(fields: [projectId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("project_task")
}

model resource {
  id               String           @id @default(cuid())
  title            String           @db.VarChar(255)
  content          String?
  type             String           @db.VarChar(100)
  categoryId       String           @map("category_id")
  authorId         String           @map("author_id")
  adminValidated   Boolean?         @default(false) @map("admin_validated")
  createdAt        DateTime         @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?        @map("updated_at") @db.Timestamp(6)
  user             user?            @relation(fields: [authorId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_author")
  resourceCategory resourceCategory @relation(fields: [categoryId], references: [id])
}

model satisfactionSurvey {
  id             String           @id @default(cuid())
  title          String           @db.VarChar(255)
  description    String?
  startDate      DateTime?        @map("start_date") @db.Timestamp(6)
  endDate        DateTime?        @map("end_date") @db.Timestamp(6)
  active         Boolean?         @default(true)
  createdAt      DateTime         @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt      DateTime?        @map("updated_at") @db.Timestamp(6)
  surveyResponse surveyResponse[]

  @@map("satisfaction_survey")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model serviceCompleted {
  id               String      @id @default(cuid())
  requestId        String      @map("request_id")
  helperId         String      @map("helper_id")
  completion_date  DateTime    @db.Timestamp(6)
  actual_duration  Int?
  creator_comment  String?
  helper_comment   String?
  creator_rating   Int?
  helper_rating    Int?
  points_exchanged Int?
  createdAt        DateTime    @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?   @map("updated_at") @db.Timestamp(6)
  user             user        @relation(fields: [helperId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_helper")
  helpRequest      helpRequest @relation(fields: [requestId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_request")

  @@map("service_completed")
}

model serviceRating {
  serviceId    String       @map("service_id")
  userId       String       @map("user_id")
  rating       Int?
  comment      String?
  ratingDate   DateTime?    @map("rating_date") @db.Timestamp(6)
  createdAt    DateTime     @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime?    @map("updated_at") @db.Timestamp(6)
  localService localService @relation(fields: [serviceId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user         user         @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([serviceId, userId])
  @@map("service_rating")
}

model skill {
  id            String        @id @default(cuid())
  name          String        @db.VarChar(255)
  description   String?       @db.VarChar(500)
  categoryId    String        @map("ca")
  createdAt     DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime?     @map("updated_at") @db.Timestamp(6)
  skillCategory skillCategory @relation(fields: [categoryId], references: [id])
  userSkill     userSkill[]
}

model surveyResponse {
  surveyId           String             @map("survey_id")
  userId             String             @map("user_id")
  responses          Json?
  response_date      DateTime?          @default(now()) @db.Timestamp(6)
  createdAt          DateTime           @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt          DateTime?          @map("updated_at") @db.Timestamp(6)
  satisfactionSurvey satisfactionSurvey @relation(fields: [surveyId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  user               user               @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([surveyId, userId])
  @@map("survey_response")
}

model trustCircle {
  userId       String    @map("user_id")
  contactId    String    @map("contact_id")
  dateAdded    DateTime  @map("date_added") @db.Date
  access_level String    @db.VarChar
  createdAt    DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime? @map("updated_at") @db.Timestamp(6)

  @@id([userId, contactId])
  @@map("trust_circle")
}

/// This table contains check constraStrings and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model trustedContact {
  id                      String    @id @default(cuid())
  userId                  String    @map("user_id")
  lastName                String    @map("last_name") @db.VarChar(255)
  firstName               String    @map("first_name") @db.VarChar(255)
  email                   String?   @unique @db.VarChar(255)
  phone                   String    @db.VarChar(20)
  relationship            String?   @db.VarChar(50)
  shareMedications        Boolean   @default(false) @map("share_medications")
  shareHealthIndicators   Boolean   @default(false) @map("share_health_indicators")
  shareWellnessActivities Boolean   @default(false) @map("share_wellness_activities")
  emergencyAlerts         Boolean   @default(false) @map("emergency_alerts")
  createdAt               DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt               DateTime? @map("updated_at") @db.Timestamp(6)
  user                    user      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("trusted_contact")
}

model urbanIssueReport {
  id             String        @id @default(cuid())
  userId         String        @map("user_id")
  categoryId     String        @map("category_id")
  description    String
  address        String        @db.VarChar(255)
  gpsCoordinates String?       @map("gps_coordinates")
  reportDate     DateTime      @map("report_date") @db.Timestamp(6)
  status         String?       @db.VarChar(255)
  cityReference  String?       @map("city_reference") @db.VarChar(255)
  createdAt      DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt      DateTime?     @map("updated_at") @db.Timestamp(6)
  user           user?         @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  issueCategory  issueCategory @relation(fields: [categoryId], references: [id])

  @@map("urban_issue_report")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model user {
  id                      String                    @id @default(cuid())
  email                   String                    @unique @db.VarChar(255)
  passwordHash            String                    @map("password_hash") @db.VarChar(255)
  firstName               String?                   @map("first_name") @db.VarChar(100)
  lastName                String?                   @map("last_name") @db.VarChar(100)
  birthDate               DateTime?                 @map("birth_date") @db.Date
  address                 String?                   @db.VarChar(255)
  gpsCoordinates          String?                   @map("gps_coordinates")
  phone                   String?                   @db.VarChar(20)
  profilePicture          String?                   @map("profile_picture") @db.VarChar(255)
  registrationDate        DateTime                  @default(now()) @map("registration_date") @db.Timestamp(6)
  accountVerified         Boolean                   @default(false) @map("account_verified")
  interfacePreferences    String?                   @map("interface_preferences") @db.VarChar(255)
  twoFactorAuthentication Boolean                   @default(false) @map("two_factor_authentication")
  helpPoints              Int?                      @default(0) @map("help_points")
  reducedMobility         Boolean?                  @default(false) @map("reduced_mobility")
  activityLevel           String?                   @map("activity_level") @db.VarChar(20)
  status                  String?                   @default("active") @db.VarChar(50)
  createdAt               DateTime                  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt               DateTime?                 @map("updated_at") @db.Timestamp(6)
  activity                activity[]
  activityLog             activityLog[]
  activityRegistration    activityRegistration[]
  collaborativeProject    collaborativeProject[]
  conversationParticipant conversationParticipant[]
  forumMessage            forumMessage[]
  forumTopic              forumTopic[]
  healthIndicator         healthIndicator[]
  helpOffer               helpOffer[]
  helpRequest             helpRequest[]
  medicationReminder      medicationReminder[]
  message                 message[]
  notification            notification[]
  notificationPreferences notificationPreferences?
  projectMember           projectMember[]
  projectTask             projectTask[]
  resource                resource[]
  serviceCompleted        serviceCompleted[]
  serviceRating           serviceRating[]
  surveyResponse          surveyResponse[]
  trustedContact          trustedContact[]
  urbanIssueReport        urbanIssueReport[]
  userActivity            userActivity[]
  userBadge               userBadge[]
  userDevice              userDevice[]
  userSkill               userSkill[]
  userStatistics          userStatistics?
  videoCall               videoCall[]
  wellnessGoal            wellnessGoal[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model userActivity {
  id                       String             @id @default(cuid())
  userId                   String             @map("user_id")
  completionDate           DateTime           @map("completion_date") @db.Date
  exerciseProgramId        String?            @map("exercise_program_id")
  cognitiveExerciseId      String?            @map("cognitive_exercise_id")
  durationMinutes          Int?               @map("duration_minutes")
  perceivedDifficultyLevel Int?               @map("perceived_difficulty_level")
  enjoymentLevel           Int?               @map("enjoyment_level")
  comment                  String?
  createdAt                DateTime           @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt                DateTime?          @map("updated_at") @db.Timestamp(6)
  cognitiveExercise        cognitiveExercise? @relation(fields: [cognitiveExerciseId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  exerciseProgram          exerciseProgram?   @relation(fields: [exerciseProgramId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user                     user               @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("user_activity")
}

model userBadge {
  userId          String    @map("user_id")
  badgeId         String    @map("badge_id")
  achievementDate DateTime  @map("achievement_date") @db.Timestamp(6)
  createdAt       DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt       DateTime? @map("updated_at") @db.Timestamp(6)
  badge           badge     @relation(fields: [badgeId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user            user      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([userId, badgeId])
  @@map("user_badge")
}

model userDevice {
  id                String    @id @default(cuid())
  userId            String    @map("user_id")
  deviceType        String    @map("device_type") @db.VarChar
  deviceName        String?   @map("device_name") @db.VarChar
  operatingSystem   String?   @map("operating_system") @db.VarChar
  notificationToken String    @map("notification_token") @db.VarChar
  lastConnection    DateTime  @map("last_connection") @db.Timestamp(6)
  createdAt         DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime? @map("updated_at") @db.Timestamp(6)
  user              user?     @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("user_device")
}

model userSkill {
  userId     String    @map("user_id")
  skillId    String    @map("skill_id")
  level      Int?
  created_at DateTime  @default(now()) @db.Timestamp(6)
  updatedAt  DateTime? @map("updated_at") @db.Timestamp(6)
  skill      skill     @relation(fields: [skillId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user       user      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([userId, skillId])
  @@map("user_skill")
}

model userStatistics {
  userId                 String    @id @map("user_id")
  servicesProvided       Int?      @map("services_provided")
  servicesReceived       Int?      @map("services_received")
  activitiesParticipated Int?      @map("activities_participated")
  activitiesOrganized    Int?      @map("activities_organized")
  forumMessages          Int?      @map("forum_messages")
  totalHelpPoints        Int?      @map("total_help_points")
  networkSize            Int?      @map("network_size")
  createdAt              DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt              DateTime? @map("updated_at") @db.Timestamp(6)
  user                   user      @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("user_statistics")
}

model videoCall {
  id             String        @id @default(cuid())
  conversationId String        @map("conversation_id")
  initiatorId    String        @map("initiator_id")
  startDate      DateTime      @map("start_date") @db.Timestamp(6)
  endDate        DateTime      @map("end_date") @db.Timestamp(6)
  status         String        @db.VarChar(50)
  createdAt      DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt      DateTime?     @map("updated_at") @db.Timestamp(6)
  conversation   conversation? @relation(fields: [conversationId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user           user?         @relation(fields: [initiatorId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("video_call")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wellnessBadge {
  id               String           @id @default(cuid())
  name             String           @db.VarChar(255)
  description      String?
  categoryId       String           @map("category_id")
  image            String?          @db.VarChar(255)
  level            Int
  createdAt        DateTime         @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?        @map("updated_at") @db.Timestamp(6)
  wellnessCategory wellnessCategory @relation(fields: [categoryId], references: [id])

  @@map("wellness_badge")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wellnessGoal {
  id               String           @id @default(cuid())
  userId           String           @map("user_id")
  title            String           @db.VarChar(255)
  categoryId       String           @map("category_id")
  targetValue      Int              @map("target_value")
  unit             String           @db.VarChar(50)
  frequency        String           @db.VarChar(50)
  startDate        DateTime         @map("start_date") @db.Date
  endDate          DateTime         @map("end_date") @db.Date
  active           Boolean          @default(true)
  createdAt        DateTime         @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?        @map("updated_at") @db.Timestamp(6)
  goalProgress     goalProgress[]
  user             user?            @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  wellnessCategory wellnessCategory @relation(fields: [categoryId], references: [id])

  @@map("wellness_goal")
}

// Gestion des catégories diverses et variées
model activity_category {
  id          String     @id @default(cuid())
  name        String     @db.Text
  description String?    @db.Text
  createdAt   DateTime   @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime?  @map("updated_at") @db.Timestamp(6)
  activity    activity[]
}

model badgeCategory {
  id          String    @id @default(cuid())
  name        String    @db.Text
  description String?   @db.Text
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(6)
  badge       badge[]

  @@map("badge_category")
}

model cognitiveCategory {
  id                String              @id @default(cuid())
  name              String              @db.Text
  description       String?             @db.Text
  createdAt         DateTime            @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime?           @map("updated_at") @db.Timestamp(6)
  cognitiveExercise cognitiveExercise[]

  @@map("cognitive_category")
}

model helpCategory {
  id          String        @id @default(cuid())
  name        String        @db.Text
  description String?       @db.Text
  helpRequest helpRequest[]
  createdAt   DateTime      @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime?     @map("updated_at") @db.Timestamp(6)

  @@map("help_category")
}

model issueCategory {
  id               String             @id @default(cuid())
  name             String             @db.Text
  description      String?            @db.Text
  urbanIssueReport urbanIssueReport[]
  createdAt        DateTime           @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt        DateTime?          @map("updated_at") @db.Timestamp(6)

  @@map("issue_category")
}

model nutritionalCategory {
  id                String              @id @default(cuid())
  name              String              @db.Text
  description       String?             @db.Text
  nutritionalAdvice nutritionalAdvice[]
  createdAt         DateTime            @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime?           @map("updated_at") @db.Timestamp(6)

  @@map("nutritional_category")
}

model programCategory {
  id                String              @id @default(cuid())
  name              String              @db.Text
  description       String?             @db.Text
  exerciseProgramId String              @map("exercise_program_id")
  createdAt         DateTime            @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime?           @map("updated_at") @db.Timestamp(6)
  cognitiveExercise cognitiveExercise[]
  exerciseProgram   exerciseProgram     @relation(fields: [exerciseProgramId], references: [id])

  @@map("program_category")
}

model projectCategory {
  id          String    @id @default(cuid())
  name        String    @db.Text
  description String?   @db.Text
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(6)

  collaborativeProject collaborativeProject[]

  @@map("project_category")
}

model resourceCategory {
  id          String     @id @default(cuid())
  name        String     @db.Text
  description String?    @db.Text
  resource    resource[]
  createdAt   DateTime   @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime?  @map("updated_at") @db.Timestamp(6)

  @@map("resource_category")
}

model serviceCategory {
  id           String         @id @default(cuid())
  name         String         @db.Text
  description  String?        @db.Text
  localService localService[]
  createdAt    DateTime       @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime?      @map("updated_at") @db.Timestamp(6)

  @@map("service_category")
}

model skillCategory {
  id          String    @id @default(cuid())
  name        String    @db.Text
  description String?   @db.Text
  skill       skill[]
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime? @map("updated_at") @db.Timestamp(6)

  @@map("skill_category")
}

model wellnessCategory {
  id            String          @id @default(cuid())
  name          String          @db.Text
  description   String?         @db.Text
  createdAt     DateTime        @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime?       @map("updated_at") @db.Timestamp(6)
  wellnessBadge wellnessBadge[]
  wellnessGoal  wellnessGoal[]

  @@map("wellness_category")
}
